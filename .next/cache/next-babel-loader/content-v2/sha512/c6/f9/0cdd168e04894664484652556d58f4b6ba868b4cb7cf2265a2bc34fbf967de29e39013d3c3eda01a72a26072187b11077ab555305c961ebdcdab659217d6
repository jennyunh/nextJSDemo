{"ast":null,"code":"import { MongoClient } from \"mongodb\"; //whenever a request is sent to this route, \n//so to /api/new-meetup\n//it will trigger the function here.\n\nconst handler = async (req, res) => {\n  if (req.method === \"POST\") {\n    const data = req.body;\n    const {\n      title,\n      image,\n      address,\n      description\n    } = data; //connect to the database\n\n    const client = await MongoClient.connect('mongodb+srv://jennyunh:8711Sajh$@cluster0.1xc7n.mongodb.net/meetups?retryWrites=true&w=majority');\n    const db = client.db(); //name the collection something (meetups in this case)\n\n    const meetupsCollection = db.collection('meetups'); //insert a document/object to the database collection\n\n    const result = await meetupsCollection.insertOne(data); //close the connection to the database.\n\n    client.close();\n    res.status(201).json({\n      message: \"meetup inserted!\"\n    });\n  }\n};\n\nexport default handler;","map":{"version":3,"sources":["/Users/jennyhwang/Desktop/next/code/14-preparing-paths-getstaticpaths/pages/api/new-meetup.js"],"names":["MongoClient","handler","req","res","method","data","body","title","image","address","description","client","connect","db","meetupsCollection","collection","result","insertOne","close","status","json","message"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B,C,CAGA;AACA;AACA;;AAEA,MAAMC,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAEpC,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AAEvB,UAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB;AAEA,UAAM;AAACC,MAAAA,KAAD;AAAQC,MAAAA,KAAR;AAAeC,MAAAA,OAAf;AAAwBC,MAAAA;AAAxB,QAAuCL,IAA7C,CAJuB,CAMvB;;AACF,UAAMM,MAAM,GAAG,MAAMX,WAAW,CAACY,OAAZ,CAAoB,iGAApB,CAArB;AAEA,UAAMC,EAAE,GAAGF,MAAM,CAACE,EAAP,EAAX,CATyB,CAW3B;;AACA,UAAMC,iBAAiB,GAAGD,EAAE,CAACE,UAAH,CAAc,SAAd,CAA1B,CAZ2B,CAc3B;;AACA,UAAMC,MAAM,GAAG,MAAMF,iBAAiB,CAACG,SAAlB,CAA4BZ,IAA5B,CAArB,CAf2B,CAiB3B;;AACAM,IAAAA,MAAM,CAACO,KAAP;AAEAf,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,OAAO,EAAE;AAAV,KAArB;AAIC;AAEA,CA5BD;;AA+BA,eAAepB,OAAf","sourcesContent":["import { MongoClient } from \"mongodb\";\n\n\n//whenever a request is sent to this route, \n//so to /api/new-meetup\n//it will trigger the function here.\n\nconst handler = async (req, res) => {\n\nif (req.method === \"POST\") {\n\n    const data = req.body;\n\n    const {title, image, address, description} = data;\n\n    //connect to the database\n  const client = await MongoClient.connect('mongodb+srv://jennyunh:8711Sajh$@cluster0.1xc7n.mongodb.net/meetups?retryWrites=true&w=majority')\n\n  const db = client.db();\n\n//name the collection something (meetups in this case)\nconst meetupsCollection = db.collection('meetups')\n\n//insert a document/object to the database collection\nconst result = await meetupsCollection.insertOne(data)\n\n//close the connection to the database.\nclient.close();\n\nres.status(201).json({message: \"meetup inserted!\"})\n\n\n\n}\n\n}\n\n\nexport default handler;"]},"metadata":{},"sourceType":"module"}